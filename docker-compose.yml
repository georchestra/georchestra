database:
  build: ./postgresql

ldap:
  build: ./ldap

geoserver:
  image: geoserver

proxy:
  image: security-proxy
  ports:
    - "8080:8080"
  links:
    - database
    - ldap
    - cas
    - mapfishapp
    - extractorapp
    - ldapadmin
    - geonetwork
    - header
    - geoserver
  volumes:
    - ./security-proxy/src/deb/resources/etc/georchestra:/etc/georchestra:ro

cas:
  image: cas
  links:
    - ldap
  volumes:
    - ./cas-server-webapp/src/deb/resources/etc/georchestra:/etc/georchestra:ro

mapfishapp:
  image: mapfishapp
  links:
    - database
  volumes:
    - ./mapfishapp/src/deb/resources/etc/georchestra:/etc/georchestra:ro

extractorapp:
  image: extractorapp
  links:
    - database
  volumes:
    - ./extractorapp/src/deb/resources/etc/georchestra:/etc/georchestra:ro

header:
  image: header
  volumes:
    - ./header/src/deb/resources/etc/georchestra:/etc/georchestra:ro

ldapadmin:
  image: ldapadmin
  links:
    - database
    - ldap
  volumes:
    - ./ldapadmin/src/deb/resources/etc/georchestra:/etc/georchestra:ro

geonetwork:
  image: geonetwork
  ports:
    - "1099:1099"
  links:
    - database
    - ldap
  volumes:
    - ./geonetwork/web/src/deb/resources/etc/georchestra:/etc/georchestra:ro
